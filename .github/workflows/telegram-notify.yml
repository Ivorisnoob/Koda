name: Telegram Notifications

on:
  push:
    branches: [main, master]
  pull_request:
    types: [opened, closed, reopened]
  issues:
    types: [opened, closed, reopened]
  issue_comment:
    types: [created]
  watch:
    types: [started]  # Stars
  fork:
  release:
    types: [published]

env:
  TELEGRAM_CHAT_ID: "@ivorisnoob_projects"

jobs:
  # ============================================
  # ğŸš€ Push/Commit Notification
  # ============================================
  notify-push:
    if: github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - name: Send Push Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸš€ *New Commit Pushed!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸŒ¿ *Branch:* `${{ github.ref_name }}`
            
            ğŸ“ *Commit:* `${{ github.event.head_commit.message }}`
            ğŸ‘¤ *Author:* ${{ github.event.head_commit.author.name }}
            
            ğŸ”— [View Commit](${{ github.event.head_commit.url }})

  # ============================================
  # ğŸ”€ Pull Request Notifications
  # ============================================
  notify-pr:
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - name: Send PR Opened Notification
        if: github.event.action == 'opened'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸ”€ *New Pull Request!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *Title:* ${{ github.event.pull_request.title }}
            ğŸ‘¤ *Author:* @${{ github.event.pull_request.user.login }}
            
            ğŸŒ¿ `${{ github.event.pull_request.head.ref }}` â†’ `${{ github.event.pull_request.base.ref }}`
            
            â• ${{ github.event.pull_request.additions }} additions
            â– ${{ github.event.pull_request.deletions }} deletions
            
            ğŸ”— [View PR](${{ github.event.pull_request.html_url }})

      - name: Send PR Merged Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            âœ… *Pull Request Merged!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *Title:* ${{ github.event.pull_request.title }}
            ğŸ‘¤ *Merged by:* @${{ github.event.sender.login }}
            
            â• ${{ github.event.pull_request.additions }} additions
            â– ${{ github.event.pull_request.deletions }} deletions
            
            ğŸ”— [View PR](${{ github.event.pull_request.html_url }})

      - name: Send PR Closed Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == false
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            âŒ *Pull Request Closed*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *Title:* ${{ github.event.pull_request.title }}
            ğŸ‘¤ *Closed by:* @${{ github.event.sender.login }}
            
            ğŸ”— [View PR](${{ github.event.pull_request.html_url }})

  # ============================================
  # ğŸ› Issue Notifications
  # ============================================
  notify-issue:
    if: github.event_name == 'issues'
    runs-on: ubuntu-latest
    steps:
      - name: Send Issue Opened Notification
        if: github.event.action == 'opened'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸ› *New Issue Opened!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *Title:* ${{ github.event.issue.title }}
            ğŸ‘¤ *Author:* @${{ github.event.issue.user.login }}
            
            ğŸ”— [View Issue](${{ github.event.issue.html_url }})

      - name: Send Issue Closed Notification
        if: github.event.action == 'closed'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            âœ… *Issue Closed!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *Title:* ${{ github.event.issue.title }}
            ğŸ‘¤ *Closed by:* @${{ github.event.sender.login }}
            
            ğŸ”— [View Issue](${{ github.event.issue.html_url }})

  # ============================================
  # ğŸ’¬ Issue Comment Notification
  # ============================================
  notify-comment:
    if: github.event_name == 'issue_comment'
    runs-on: ubuntu-latest
    steps:
      - name: Send Comment Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸ’¬ *New Comment!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ“‹ *On:* ${{ github.event.issue.title }}
            ğŸ‘¤ *Author:* @${{ github.event.comment.user.login }}
            
            ğŸ”— [View Comment](${{ github.event.comment.html_url }})

  # ============================================
  # â­ Star Notification
  # ============================================
  notify-star:
    if: github.event_name == 'watch' && github.event.action == 'started'
    runs-on: ubuntu-latest
    steps:
      - name: Send Star Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            â­ *New Star!*
            
            ğŸ‰ @${{ github.event.sender.login }} just starred the repo!
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            â­ *Total Stars:* ${{ github.event.repository.stargazers_count }}
            
            ğŸ”— [View Repo](https://github.com/${{ github.repository }})

  # ============================================
  # ğŸ´ Fork Notification
  # ============================================
  notify-fork:
    if: github.event_name == 'fork'
    runs-on: ubuntu-latest
    steps:
      - name: Send Fork Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸ´ *Repository Forked!*
            
            ğŸ‘¤ @${{ github.event.sender.login }} forked the repo!
            
            ğŸ“¦ *Original:* `${{ github.repository }}`
            ğŸ“¦ *Fork:* `${{ github.event.forkee.full_name }}`
            ğŸ´ *Total Forks:* ${{ github.event.repository.forks_count }}
            
            ğŸ”— [View Fork](${{ github.event.forkee.html_url }})

  # ============================================
  # ğŸ“¦ Release Notification
  # ============================================
  notify-release:
    if: github.event_name == 'release'
    runs-on: ubuntu-latest
    steps:
      - name: Send Release Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: markdown
          message: |
            ğŸ‰ *New Release Published!*
            
            ğŸ“¦ *Repository:* `${{ github.repository }}`
            ğŸ·ï¸ *Version:* `${{ github.event.release.tag_name }}`
            ğŸ“‹ *Name:* ${{ github.event.release.name }}
            
            ğŸ‘¤ *Author:* @${{ github.event.release.author.login }}
            
            ğŸ”— [Download Release](${{ github.event.release.html_url }})
