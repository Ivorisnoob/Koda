name: Telegram Notifications

on:
  push:
    branches: [main, master]
  pull_request:
    types: [opened, closed, reopened]
  issues:
    types: [opened, closed, reopened]
  issue_comment:
    types: [created]
  watch:
    types: [started]  # Stars
  fork:
  release:
    types: [published]

env:
  TELEGRAM_CHAT_ID: "@ivorisnoob_projects"

jobs:
  # ============================================
  # ğŸš€ Push/Commit Notification
  # ============================================
  notify-push:
    if: github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - name: Send Push Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          debug: true
          message: |
            ğŸš€ <b>New Commit Pushed!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸŒ¿ <b>Branch:</b> ${{ github.ref_name }}
            
            ğŸ“ <b>Commit:</b> ${{ github.sha }}
            ğŸ‘¤ <b>Author:</b> ${{ github.event.head_commit.author.name }}
            
            ğŸ”— <a href="${{ github.event.head_commit.url }}">View Commit</a>

  # ============================================
  # ğŸ”€ Pull Request Notifications
  # ============================================
  notify-pr:
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - name: Send PR Opened Notification
        if: github.event.action == 'opened'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            ğŸ”€ <b>New Pull Request!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>Title:</b> ${{ github.event.pull_request.title }}
            ğŸ‘¤ <b>Author:</b> ${{ github.event.pull_request.user.login }}
            
            ğŸŒ¿ ${{ github.event.pull_request.head.ref }} â†’ ${{ github.event.pull_request.base.ref }}
            
            â• ${{ github.event.pull_request.additions }} additions
            â– ${{ github.event.pull_request.deletions }} deletions
            
            ğŸ”— <a href="${{ github.event.pull_request.html_url }}">View PR</a>

      - name: Send PR Merged Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            âœ… <b>Pull Request Merged!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>Title:</b> ${{ github.event.pull_request.title }}
            ğŸ‘¤ <b>Merged by:</b> ${{ github.event.sender.login }}
            
            â• ${{ github.event.pull_request.additions }} additions
            â– ${{ github.event.pull_request.deletions }} deletions
            
            ğŸ”— <a href="${{ github.event.pull_request.html_url }}">View PR</a>

      - name: Send PR Closed Notification
        if: github.event.action == 'closed' && github.event.pull_request.merged == false
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            âŒ <b>Pull Request Closed</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>Title:</b> ${{ github.event.pull_request.title }}
            ğŸ‘¤ <b>Closed by:</b> ${{ github.event.sender.login }}
            
            ğŸ”— <a href="${{ github.event.pull_request.html_url }}">View PR</a>

  # ============================================
  # ğŸ› Issue Notifications
  # ============================================
  notify-issue:
    if: github.event_name == 'issues'
    runs-on: ubuntu-latest
    steps:
      - name: Send Issue Opened Notification
        if: github.event.action == 'opened'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            ğŸ› <b>New Issue Opened!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>Title:</b> ${{ github.event.issue.title }}
            ğŸ‘¤ <b>Author:</b> ${{ github.event.issue.user.login }}
            
            ğŸ”— <a href="${{ github.event.issue.html_url }}">View Issue</a>

      - name: Send Issue Closed Notification
        if: github.event.action == 'closed'
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            âœ… <b>Issue Closed!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>Title:</b> ${{ github.event.issue.title }}
            ğŸ‘¤ <b>Closed by:</b> ${{ github.event.sender.login }}
            
            ğŸ”— <a href="${{ github.event.issue.html_url }}">View Issue</a>

  # ============================================
  # ğŸ’¬ Issue Comment Notification
  # ============================================
  notify-comment:
    if: github.event_name == 'issue_comment'
    runs-on: ubuntu-latest
    steps:
      - name: Send Comment Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            ğŸ’¬ <b>New Comment!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ“‹ <b>On:</b> ${{ github.event.issue.title }}
            ğŸ‘¤ <b>Author:</b> ${{ github.event.comment.user.login }}
            
            ğŸ”— <a href="${{ github.event.comment.html_url }}">View Comment</a>

  # ============================================
  # â­ Star Notification
  # ============================================
  notify-star:
    if: github.event_name == 'watch' && github.event.action == 'started'
    runs-on: ubuntu-latest
    steps:
      - name: Send Star Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            â­ <b>New Star!</b>
            
            ğŸ‰ ${{ github.event.sender.login }} just starred the repo!
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            â­ <b>Total Stars:</b> ${{ github.event.repository.stargazers_count }}
            
            ğŸ”— <a href="https://github.com/${{ github.repository }}">View Repo</a>

  # ============================================
  # ğŸ´ Fork Notification
  # ============================================
  notify-fork:
    if: github.event_name == 'fork'
    runs-on: ubuntu-latest
    steps:
      - name: Send Fork Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            ğŸ´ <b>Repository Forked!</b>
            
            ğŸ‘¤ ${{ github.event.sender.login }} forked the repo!
            
            ğŸ“¦ <b>Original:</b> ${{ github.repository }}
            ğŸ“¦ <b>Fork:</b> ${{ github.event.forkee.full_name }}
            ğŸ´ <b>Total Forks:</b> ${{ github.event.repository.forks_count }}
            
            ğŸ”— <a href="${{ github.event.forkee.html_url }}">View Fork</a>

  # ============================================
  # ğŸ“¦ Release Notification
  # ============================================
  notify-release:
    if: github.event_name == 'release'
    runs-on: ubuntu-latest
    steps:
      - name: Send Release Notification
        uses: appleboy/telegram-action@master
        with:
          to: ${{ env.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          format: html
          message: |
            ğŸ‰ <b>New Release Published!</b>
            
            ğŸ“¦ <b>Repository:</b> ${{ github.repository }}
            ğŸ·ï¸ <b>Version:</b> ${{ github.event.release.tag_name }}
            ğŸ“‹ <b>Name:</b> ${{ github.event.release.name }}
            
            ğŸ‘¤ <b>Author:</b> ${{ github.event.release.author.login }}
            
            ğŸ”— <a href="${{ github.event.release.html_url }}">Download Release</a>
